<div class="p-4">
    <h2 class="text-2xl font-bold mb-4">Chat History</h2>
    <% if (selectedChat) { %>
        <h3 class="text-xl font-semibold"><%= selectedChat.title %></h3>
        <div class="chat-messages">
            <% selectedChat.messages.forEach(msg => { %>
                <div class="<%= msg.role === 'user' ? 'text-right' : 'text-left' %> mb-2">
                    <span class="inline-block bg-<%= msg.role === 'user' ? 'blue' : 'gray' %>-200 p-2 rounded">
                        <%= msg.content %>
                    </span>
                </div>
            <% }) %>
        </div>
    <% } else { %>
        <ul class="space-y-2">
            <% chats.forEach(chat => { %>
                <li>
                    <a href="/chat-history/<%= chat.id %>" class="block p-2 hover:bg-gray-100">
                        <%= chat.title %> <span class="text-gray-500">(<%= chat.timestamp.toLocaleDateString() %>)</span>
                    </a>
                </li>
            <% }) %>
        </ul>
        <% if (chats.length === 0) { %>
            <p class="text-gray-500">No chat history available.</p>
        <% } %>
    <% } %>
</div>